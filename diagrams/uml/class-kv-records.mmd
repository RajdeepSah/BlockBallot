classDiagram
    class UserRecord {
        +string? id
        +string email
        +string? name
        +string? phone
        +string? twofa_method
        +string? created_at
    }
    
    class EligibilityRecord {
        +string? id
        +string election_id
        +string contact
        +string? user_id
        +string status
        +string created_at
    }
    
    class AccessRequestRecord {
        +string id
        +string election_id
        +string user_id
        +string contact
        +string status
        +string created_at
        +string? decided_by
        +string? decided_at
    }
    
    class BallotLinkRecord {
        +string status
        +string created_at
    }
    note for BallotLinkRecord "NO tx_hash field - preserves vote anonymity.\nStored at vote:user:{electionId}:{userId}"
    
    class VoteTransactionRecord {
        +string timestamp
        +string electionId
    }
    note for VoteTransactionRecord "Anonymous transaction registry.\nStored at vote:tx:{electionId}:{txHash}\nNO userId - cannot link votes to users"
    
    class OtpRecord {
        +string email
        +string otpHash
        +string salt
        +number expiresAt
        +number createdAt
        +number attemptCount
        +number lastSentAt
    }
    note for OtpRecord "Stored at otp:{email}\nUses HMAC-SHA256 hashing"
    
    class InviteHistoryRecord {
        +Record~string, number~ emails
    }
    
    class RateLimitRecord {
        +number lastSentAt
    }
    
    UserRecord "1" --> "0..*" EligibilityRecord : has
    UserRecord "1" --> "0..*" AccessRequestRecord : makes
    UserRecord "1" --> "0..1" BallotLinkRecord : has vote flag
    UserRecord "1" --> "0..1" OtpRecord : has
